<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Easily and Rapidly Generate Raster Image Data with Support for Plotly.js • rasterly</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Easily and Rapidly Generate Raster Image Data with Support for Plotly.js">
<meta property="og:description" content="This package aims to easily and rapidly generate raster data in R, even for very large datasets, with an aesthetics-based mapping syntax that should be familiar to users of the \code{ggplot2} package. While \code{rasterly} does not attempt to reproduce the full functionality of the \code{Datashader} graphics pipeline system for Python, the \code{rasterly} API has several core elements in common with that software package.">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">rasterly</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/introduction.html">Introduction to rasterly</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="rasterly-" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#rasterly-" class="anchor"></a>rasterly <img src="https://user-images.githubusercontent.com/9809798/67056539-75d75200-f11a-11e9-9b62-2b62a349a45b.jpg" align="right" height="144" width="124.8">
</h1></div>

<p>Easily and rapidly generate raster data in R, even for larger volumes of data, with an aesthetics-based mapping syntax that should be familiar to users of the <code>ggplot2</code> package.</p>
<p>While <code>rasterly</code> does not attempt to reproduce the full functionality of the Datashader graphics pipeline system for Python, the <code>rasterly</code> API has several core elements in common with that software package. Combined with Plotly.js and the <code>plotly</code> package, <code>rasterly</code> enables analysts to generate interactive figures which are responsive enough to embed into web applications.</p>
<p>Documentation: <a href="https://z267xu.github.io/rasterly/">https://z267xu.github.io/rasterly/</a></p>
<div id="importing-datasets-for-use-with-rasterly" class="section level2">
<h2 class="hasAnchor">
<a href="#importing-datasets-for-use-with-rasterly" class="anchor"></a>Importing datasets for use with rasterly</h2>
<p>There are several ways to import large datasets into R for use with <code>rasterly</code>; one option is the <code>data.table</code> package (<a href="https://cran.r-project.org/web/packages/data.table/vignettes/datatable-intro.html" class="uri">https://cran.r-project.org/web/packages/data.table/vignettes/datatable-intro.html</a>).</p>
<ul>
<li>csv file:</li>
</ul>
<pre><code>library(data.table)
data &lt;- data.table::fread("yourpath/somefile.csv") # or a link</code></pre>
<ul>
<li>parquet file: Apache Parquet is a column-oriented, open-source format which offers efficient data compression. There are a few options in R for importing Parquet data. One of these is the <a href="https://cran.r-project.org/web/packages/arrow/index.html"><code>arrow</code></a> package, now available on CRAN.</li>
</ul>
<p>The package must build Apache Arrow first, so it may take a few minutes to install the first time around.</p>
<pre><code>library(arrow)
parquet_data &lt;- read_parquet("somefile.parquet")
# returns a data.frame if sparklyr is not loaded, otherwise it will be a tibble
# to obtain an ordinary data.frame, some slight postprocessing may be required
# parquet_data &lt;- base::as.data.frame(parquet_data)</code></pre>
<ul>
<li>fst file: The <a href="https://www.fstpackage.org/">fst package</a> is an excellent option for extremely fast serialization of large data frames in R. In addition to rapid compression using LZ4 and ZSTD, it provides support for multithreading to parallelize operations.</li>
</ul>
<pre><code>library(fst)
fst_data &lt;- read.fst("somefile.fst")</code></pre>
</div>
<div id="installing-the-package" class="section level2">
<h2 class="hasAnchor">
<a href="#installing-the-package" class="anchor"></a>Installing the package</h2>
<p>The <code>rasterly</code> package is now available from CRAN, and the most recent release will always be available on GitHub. To install the CRAN package:</p>
<pre><code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages("rasterly")</a></code></pre>
<p>To install the current version available via GitHub instead:</p>
<pre><code><a href="https://remotes.r-lib.org/reference/install_github.html">remotes::install_github("plotly/rasterly")</a></code></pre>
</div>
<div id="visualizing-data-with-rasterly" class="section level2">
<h2 class="hasAnchor">
<a href="#visualizing-data-with-rasterly" class="anchor"></a>Visualizing data with <code>rasterly</code>
</h2>
<p><code>rasterly</code> is inspired by the <a href="http://datashader.org/getting_started/index.html"><code>datashader</code></a> package available for Python. Both provide the capability to generate raster data for rapid rendering of graphics for even very large datasets.</p>
<p>In terms of performance, <code>datashader</code> is faster but <code>rasterly</code> is comparable. <code>rasterly</code> aims to provide a user-friendly interface to generate raster data for use with the <code>plotly</code> package; it cannot be used for plotting or rendering figures on its own.</p>
<div id="producing-an-interactive-graph-with-the-plotly-package" class="section level4">
<h4 class="hasAnchor">
<a href="#producing-an-interactive-graph-with-the-plotly-package" class="anchor"></a>Producing an interactive graph with the plotly package</h4>
<p>To illustrate the basic functionality provided by the package, we’ll start by retrieving data on Uber trips taken in New York City from April 1st until September 30th of 2014. The dataset includes 4,533,327 observations.</p>
<pre><code># Load New York Uber data
ridesRaw_1 &lt;- "https://raw.githubusercontent.com/plotly/datasets/master/uber-rides-data1.csv" %&gt;%
  data.table::fread(stringsAsFactors = FALSE)
ridesRaw_2 &lt;- "https://raw.githubusercontent.com/plotly/datasets/master/uber-rides-data2.csv" %&gt;%
  data.table::fread(stringsAsFactors = FALSE)
ridesRaw_3 &lt;- "https://raw.githubusercontent.com/plotly/datasets/master/uber-rides-data3.csv"  %&gt;%
  data.table::fread(stringsAsFactors = FALSE)
ridesDf &lt;- list(ridesRaw_1, ridesRaw_2, ridesRaw_3) %&gt;%
  data.table::rbindlist()</code></pre>
<p>Now that the data are loaded, we can pass them to <code>plot_ly</code> and pipe the output into <code>add_rasterly</code>:</p>
<pre><code>plot_ly(ridesDf, x = ~Lat, y = ~Lon) %&gt;%
 add_rasterly_heatmap()</code></pre>
<p><img src="reference/figures/add_rasterizer.gif"></p>
</div>
<div id="general-usage" class="section level4">
<h4 class="hasAnchor">
<a href="#general-usage" class="anchor"></a>General usage</h4>
<p>Pass the data into <code>rasterly</code>:</p>
<pre><code>ridesDf %&gt;%
  rasterly(mapping = aes(x = Lat, y = Lon)) %&gt;%
  rasterly_points() -&gt; p
p
# or use simplied `rplot`
with(ridesDf,
     rplot(x = Lat, y = Lon)
)</code></pre>
<p><img src="reference/figures/grid_rasterizer.png"></p>
<p>Note that, <code>p</code> is a list of environments. The display info can be accessed through</p>
<pre><code>r &lt;- rasterly_build(p)
str(r)</code></pre>
<p>“r” contains image raster and other useful info (like numeric aggregation matrices) required to produce the image but it does <strong>not</strong> provide any graphs.</p>
</div>
</div>
<div id="example-use-in-interactive-web-applications" class="section level2">
<h2 class="hasAnchor">
<a href="#example-use-in-interactive-web-applications" class="anchor"></a>Example use in interactive web applications</h2>
<p>The Uber NYC Rasterizer application in our Dash Gallery provides a simple live demo of the <code>rasterly</code> package in action. Check it out <a href="https://dash-gallery.plotly.host/dashr-uber-rasterizer/">here</a>!</p>
<p><img width="840" alt="Uber NYC Rasterizer screenshot" src="https://user-images.githubusercontent.com/9809798/67794376-f1a69800-fa52-11e9-930d-ce57575ddef7.png"></p>
<p>A second <a href="https://github.com/plotly/dashR">Dash for R</a> application to visualize (a much larger) dataset from the US Census Bureau is also <a href="https://github.com/plotly/rasterly/tree/master/apps/UScensus">available</a>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=rasterly">https://​cloud.r-project.org/​package=rasterly</a>
</li>
<li>Report a bug at <br><a href="https://github.com/plotly/rasterly/issues">https://​github.com/​plotly/​rasterly/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Zehao Xu <br><small class="roles"> Author, maintainer </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/z267xu/rasterly"><img src="https://travis-ci.org/z267xu/rasterly.svg?branch=master" alt="Build Status"></a></li>
<li><a href="https://codecov.io/gh/z267xu/rasterly?branch=master"><img src="https://codecov.io/gh/z267xu/rasterly/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://cran.r-project.org/web/packages/rasterly/index.html"><img src="https://www.r-pkg.org/badges/version/rasterly" alt="CRAN status"></a></li>
<li><a href="https://cran.r-project.org/package=rasterly"><img src="https://cranlogs.r-pkg.org/badges/rasterly"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Zehao Xu.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
